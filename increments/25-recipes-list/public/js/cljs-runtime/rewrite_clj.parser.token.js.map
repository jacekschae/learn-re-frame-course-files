{"version":3,"sources":["rewrite_clj/parser/token.cljs"],"sourcesContent":["(ns rewrite-clj.parser.token\n  (:require [rewrite-clj.node :as node]\n            [rewrite-clj.reader :as r]\n            [goog.string :as gstring]))\n\n\n(defn- join-2 [a b]\n  (-> a gstring/StringBuffer. (.append b) .toString))\n\n(defn- ^boolean allowed-default? [c]\n  false)\n\n(defn- ^boolean allowed-suffix? [c]\n  (or (identical? c \\')\n      (identical? c \\:)))\n\n\n\n(defn- read-to-boundary\n  [^not-native reader allowed?]\n  (r/read-until\n   reader\n   #(and (not (allowed? %))\n         (r/whitespace-or-boundary? %))))\n\n\n\n\n(defn- read-to-char-boundary\n  [^not-native reader]\n  (let [c (r/read-char reader)]\n    (join-2 c (if (not (identical? c \\\\))\n                (read-to-boundary reader allowed-default?)\n                \"\"))))\n\n\n\n(defn- symbol-node\n  \"Symbols allow for certain boundary characters that have\n   to be handled explicitly.\"\n  [^not-native reader value value-string]\n  (let [suffix (read-to-boundary\n                 reader\n                 allowed-suffix?)]\n    (if (empty? suffix)\n      (node/token-node value value-string)\n      (let [s (join-2 value-string suffix)]\n        (node/token-node\n          (r/read-string s)\n          s)))))\n\n\n\n\n(defn parse-token\n  \"Parse a single token.\"\n  [^not-native reader]\n  (let [first-char (r/read-char reader)\n        s (join-2 first-char (if (identical? first-char \\\\)\n                         (read-to-char-boundary reader)\n                         (read-to-boundary reader allowed-default?)))\n        v (r/read-string s)]\n    (if (symbol? v)\n      (symbol-node reader v s)\n      (node/token-node v s))))\n"],"mappings":";;;;;AAMA,AAAA,AAAOA,AAAQC,AAAEC;AAAjB,AACE,AAAID,AAAwB,AAAA,AAAAE,AAASD;;AAEvC,AAAA,AAAgBE,AAAkBC;AAAlC,AAAA;;AAGA,AAAA,AAAgBC,AAAiBD;AAAjC,AACE,AAAI,AAAA,AAAYA,AACZ,AAAA,AAAYA;;AAIlB,AAAA,AAAOE,AACQC,AAAOC;AADtB,AAEE,AAAA,AAAAC,AAACC,AACAH;AADD,AAEE,AAAK,AAACI,AAAI,AAAAF,AAAAA,AAACD,AAAAA,AAAAA,AACN,AAAAC,AAACG;;;AAKV,AAAA,AAAOC,AACQN;AADf,AAEE,AAAMH,AAAE,AAACU,AAAAA,AAAAA,AAAYP,AAAAA;AAArB,AACE,AAACR,AAAOK,AAAE,AAAA,AAAI,AAAK,AAAA,AAAYA,AACnB,AAACE,AAAiBC,AAAOJ;;AAKzC;;;;AAAA,AAAOY,AAGQR,AAAOS,AAAMC;AAH5B,AAIE,AAAMC,AAAO,AAACZ,AACCC,AACAF;AAFf,AAGE,AAAI,AAACc,AAAOD;AACV,AAACE,AAAAA,AAAAA,AAAgBJ,AAAAA,AAAMC,AAAAA;;AACvB,AAAMI,AAAE,AAACtB,AAAOkB,AAAaC;AAA7B,AACE,AAAAI,AACE,AAACE,AAAAA,AAAAA,AAAcH,AAAAA;AADjBE,AAEEF;AAFF,AAAA,AAAAC,AAAAC,AAAAD,AAAAC,AAACH,AAAAA,AAAAA;;;AAOT;;;AAAA,AAAMK,AAESlB;AAFf,AAGE,AAAMmB,AAAW,AAACZ,AAAAA,AAAAA,AAAYP,AAAAA;AACxBc,AAAE,AAACtB,AAAO2B,AAAW,AAAI,AAAA,AAAYA,AACpB,AAACb,AAAsBN,AACvB,AAACD,AAAiBC,AAAOJ;AAC1CwB,AAAE,AAACH,AAAAA,AAAAA,AAAcH,AAAAA;AAJvB,AAKE,AAAI,AAAAO,AAASD;AACX,AAACZ,AAAYR,AAAOoB,AAAEN;;AACtB,AAACD,AAAAA,AAAAA,AAAgBO,AAAAA,AAAEN,AAAAA","names":["rewrite-clj.parser.token/join-2","a","b","goog.string/StringBuffer","rewrite-clj.parser.token/allowed-default?","c","rewrite-clj.parser.token/allowed-suffix?","rewrite-clj.parser.token/read-to-boundary","reader","allowed?","p1__30403#","rewrite-clj.reader/read-until","cljs.core/not","rewrite-clj.reader/whitespace-or-boundary?","rewrite-clj.parser.token/read-to-char-boundary","rewrite-clj.reader/read-char","rewrite-clj.parser.token/symbol-node","value","value-string","suffix","cljs.core/empty?","rewrite-clj.node/token-node","s","G__30410","G__30411","rewrite-clj.reader/read-string","rewrite-clj.parser.token/parse-token","first-char","v","cljs.core/Symbol"]}